import{g as t,w as c}from"./De5Mxx5s.js";import{S as a}from"./DjJm9GIN.js";import{b as n}from"./YDCeYGpB.js";const e=c(null),s=c(!1);function S(){if(!n){s.set(!0);return}try{const r=localStorage.getItem(a.RSVP_DATA);r&&e.set(JSON.parse(r))}catch(r){console.error("Failed to load RSVP data from localStorage:",r)}finally{s.set(!0)}}function i(r){if(n)try{localStorage.setItem(a.RSVP_DATA,JSON.stringify(r)),e.set(r)}catch(o){console.error("Failed to save RSVP data to localStorage:",o)}}function f(r,o){const l=t(e);if(!l)return;const u={...l,isAttending:r,reason:r?void 0:o,updatedAt:new Date().toISOString()};i(u)}function g(){if(n)try{localStorage.removeItem(a.RSVP_DATA),e.set(null)}catch(r){console.error("Failed to clear RSVP data from localStorage:",r)}}function h(r){return r?r.school==="other"?r.schoolOther||"Lainnya":{penus:"SMK Plus Pelita Nusantara",pesat:"SMA Plus PGRI Cibinong"}[r.school]||r.school:""}function m(r){return r?r.class==="Lainnya"?r.classOther||"Lainnya":r.class:""}const y={subscribe:e.subscribe,isLoaded:s,load:S,save:i,updateAttendance:f,clear:g,getSchoolDisplay:h,getClassDisplay:m,getData:()=>t(e),hasSubmitted:()=>t(e)!==null};export{y as u};
